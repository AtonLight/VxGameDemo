System.register("chunks:///_virtual/BattleFlow.ts",["cc","./Game.ts","./Character.ts","./Enum.ts"],(function(t){"use strict";var e,a,s,i,r;return{setters:[function(t){e=t.cclegacy},function(t){a=t.Item},function(t){s=t.Character},function(t){i=t.CharacterType,r=t.BattleFlowEnum}],execute:function(){e._RF.push({},"ed292FLdIhD8qP+m5Z7G4Fc","BattleFlow",void 0);t("BattleFlow",class{constructor(){this.characters=void 0,this.attackCharacter=void 0,this.defineCharacter=void 0,this.action=!1,this.times=0,this.turn=1,this.totalTime=0,this.action=!1,this.times=0}update(t){if(1==this.action&&(this.times=this.times+t,this.totalTime=this.totalTime+this.times,this.times>=.15)){for(let t=0;t<this.characters.length;t++)if(this.characters[t].currentSpeed=this.characters[t].currentSpeed+this.characters[t].speed,this.characters[t].currentSpeed>=100){this.action=!1,this.setAttackAndDenfine(t);break}this.times=0}}initBattle(){a.view.reset(),this.action=!1,this.characters=new Array,this.characters[0]=new s("C001",i.First),this.characters[1]=new s("C002",i.Second),console.log(this.characters[0].speed),this.times=0,this.turn=1,this.action=!0}setAttackAndDenfine(t){0==t?(this.attackCharacter=this.characters[0],this.defineCharacter=this.characters[1]):(this.attackCharacter=this.characters[1],this.defineCharacter=this.characters[0]),this.nextFlow(r.GetWeapon)}nextFlow(t){t==r.GetWeapon?this.attackCharacter.RandomWeapon():t==r.ThrowWeapon?this.attackCharacter.throwWeapon():t==r.Attack&&this.setDamage(this.attackCharacter.Attacks())}setDamage(t){0==this.defineCharacter.dodgeAndBlock()?1==this.defineCharacter.getDamage(t)&&setTimeout((()=>{this.attackCharacter.setTotalDamge(t),this.attackCharacter.resetSpeed(),this.turn++,this.action=!0}),.5):setTimeout((()=>{this.attackCharacter.resetSpeed(),this.attackCharacter.resetState(),this.defineCharacter.resetState(),this.turn++,this.action=!0}),.5)}getTotalTime(){return this.totalTime}}),e._RF.pop()}}}));

System.register("chunks:///_virtual/Character.ts",["cc","./Weapon.ts","./Game.ts","./Enum.ts","./Characterdata.ts"],(function(t){"use strict";var e,i,a,h,s,r;return{setters:[function(t){e=t.cclegacy,i=t.math},function(t){a=t.weapon},function(t){h=t.Item},function(t){s=t.BattleFlowEnum},function(t){r=t.Characterdata}],execute:function(){e._RF.push({},"6a1e0Gw27FFJZoMBNoLBLYd","Character",void 0);t("Character",class{constructor(t,e){this.speed=0,this.health=0,this.getWeaponHit=.5,this.attack=void 0,this.throw=void 0,this.doubleHit=void 0,this.criticalStrike=void 0,this.criticalDamage=void 0,this.dodge=void 0,this.block=void 0,this.charNme=void 0,this.data=void 0,this.charactertype=void 0,this.currentWeapon=null,this.currentSpeed=0,this.isThrowWeapon=!1,this.currentHealth=0,this.totalDamage=0,this.isBlock=!1,this.isDodge=!1,this.isDouble=!1,this.isCriical=!1,this.weapons=void 0,this.charactertype=e,this.data=r[t],this.charNme=r[t].Name,this.health=r[t].Health,this.currentHealth=this.health,this.speed=r[t].Speed,this.attack=r[t].Attack,this.throw=r[t].BaseThrow,this.doubleHit=r[t].DoubleHit,this.criticalStrike=r[t].CriticalStrike,this.criticalDamage=r[t].CriticalDamage,this.dodge=r[t].Dodge,this.block=r[t].Block,this.weapons=new Array;for(let e=0;e<this.data.Weapons.length;e++)this.weapons[e]=new a(r[t].Weapons[e]);h.view.setHeath(this.charactertype,this.currentHealth,this.currentHealth/this.health)}getweapon(t){this.currentWeapon=this.weapons[t],this.attack=this.attack+this.currentWeapon.attack,this.throw=this.throw+this.currentWeapon.baseThrow,this.doubleHit=this.doubleHit+this.currentWeapon.doubleHit,this.criticalStrike=this.criticalStrike+this.currentWeapon.criticalStrike,this.dodge=this.dodge+this.currentWeapon.dodge,this.criticalDamage=this.criticalDamage+this.currentWeapon.criticalDamage,this.block=this.block+this.currentWeapon.block}removeWeapon(){this.attack=this.attack-this.currentWeapon.attack,this.throw=this.throw-this.currentWeapon.baseThrow,this.doubleHit=this.doubleHit-this.currentWeapon.doubleHit,this.criticalStrike=this.criticalStrike-this.currentWeapon.criticalStrike,this.dodge=this.dodge-this.currentWeapon.dodge,this.criticalDamage=this.criticalDamage-this.currentWeapon.criticalDamage,this.block=this.block-this.currentWeapon.block}RandomWeapon(){if(null!=this.currentWeapon&&this.isThrowWeapon&&(this.removeWeapon(),this.currentWeapon=null),null==this.currentWeapon&&this.weapons.length>0){let t=i.random();if(this.getWeaponHit>=t){let t=i.randomRangeInt(0,this.weapons.length);this.getweapon(t),this.weapons.splice(t,1)}}h.battleFlow.nextFlow(s.ThrowWeapon)}throwWeapon(){if(null!=this.currentWeapon){let t=i.random();(this.currentWeapon.baseThrow>=t||this.currentWeapon.times<=0)&&(this.isThrowWeapon=!0)}h.battleFlow.nextFlow(s.Attack)}Attacks(){let t=this.attack;1==this.isThrowWeapon&&null!=this.currentWeapon&&(t=this.attack+this.currentWeapon.attack*this.currentWeapon.ThrowDamage),null!=this.currentWeapon&&this.currentWeapon.times--;let e=i.random();return this.criticalStrike>=e&&(t*=this.criticalDamage),e=i.random(),this.doubleHit>=e&&0==this.isThrowWeapon&&(t*=2),Math.floor(t)}dodgeAndBlock(){let t=i.random();return this.dodge>=t||(t=i.random(),this.block>=t)}getDamage(t){return this.currentHealth=this.currentHealth-t,h.view.setBattleMsg(t),this.currentHealth<=0?(h.view.setFinalMsg(),this.currentHealth=0,h.view.setHeath(this.charactertype,this.currentHealth,this.currentHealth/this.health),!1):(h.view.setHeath(this.charactertype,this.currentHealth,this.currentHealth/this.health),!0)}resetSpeed(){this.currentSpeed=0}resetState(){this.isDodge=!1,this.isCriical=!1,this.isDodge=!1,this.isBlock=!1}setTotalDamge(t){this.totalDamage=this.totalDamage+t}update(t){}}),e._RF.pop()}}}));

System.register("chunks:///_virtual/Characterdata.ts",["cc"],(function(e){"use strict";var a;return{setters:[function(e){a=e.cclegacy}],execute:function(){a._RF.push({},"fc525K6dGxHEYLxkO8i8U9I","Characterdata",void 0);e("Characterdata",{C001:{ID:"C001",Name:"大毛驴",Weapons:["D001","D002","D001","D001","D001"],Health:500,Speed:15,Attack:25,BaseThrow:.2,DoubleHit:.3,CriticalStrike:.2,CriticalDamage:1.3,Dodge:.2,Block:.2},C002:{ID:"C002",Name:"小锯鳄",Weapons:["D001","D002","D001","D001","D002"],Health:500,Speed:15,Attack:35,BaseThrow:.3,DoubleHit:.3,CriticalStrike:.3,CriticalDamage:1.3,Dodge:.3,Block:.3}});a._RF.pop()}}}));

System.register("chunks:///_virtual/Control.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Game.ts"],(function(t){"use strict";var e,n,r,o,i,c,s;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){r=t.cclegacy,o=t.Button,i=t._decorator,c=t.Component},function(t){s=t.Item}],execute:function(){var l,u,a,p,b;r._RF.push({},"927688ZJCJBJa/KcjInu168","Control",void 0);const{ccclass:f,property:y}=i;t("Control",(l=f("Control"),u=y({type:o}),l((b=e((p=class extends c{constructor(...t){super(...t),n(this,"btnReset",b,this)}start(){}update(t){}btnResetOnClick(t){s.battleFlow.initBattle()}}).prototype,"btnReset",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),a=p))||a));r._RF.pop()}}}));

System.register("chunks:///_virtual/DBMacros.ts",["cc","./Weapondata.ts","./Characterdata.ts"],(function(t){"use strict";var n,e,r;return{setters:[function(t){n=t.cclegacy},function(t){e=t.Weapondata},function(t){r=t.Characterdata}],execute:function(){function u(t,n){if(null==n){let e=Object.keys(t);n=[];for(let r of e){let e=t[r];n.push(e)}}return n}function c(t,n){return t[n]}t({DB_CHARACTERDATA_ARRAY:function(){return u(r,null)},DB_CHARACTERDATA_ITEM:function(t){return c(r,t)},DB_WEAPONDATA_ARRAY:function(){return u(e,null)},DB_WEAPONDATA_ITEM:function(t){return c(e,t)}}),n._RF.push({},"c5c7e5fnAVO/LD3oQIp8D37","DBMacros",void 0);n._RF.pop()}}}));

System.register("chunks:///_virtual/Enum.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){let n,c;t({BattleFlowEnum:void 0,CharacterType:void 0}),e._RF.push({},"c05f6VpWiZHV6C4DpW8+WhR","Enum",void 0),function(t){t[t.GetWeapon=0]="GetWeapon",t[t.ThrowWeapon=1]="ThrowWeapon",t[t.Attack=2]="Attack",t[t.Damage=3]="Damage"}(n||(n=t("BattleFlowEnum",{}))),function(t){t[t.First=0]="First",t[t.Second=1]="Second"}(c||(c=t("CharacterType",{}))),e._RF.pop()}}}));

System.register("chunks:///_virtual/Game.ts",["cc"],(function(t){"use strict";var o;return{setters:[function(t){o=t.cclegacy}],execute:function(){o._RF.push({},"3b581uc9ulBLbobyXvDlXLb","Game",void 0);class e{}t("Item",e),e.battleFlow=void 0,e.view=void 0,e.load=void 0,e.tools=void 0,e.control=void 0,o._RF.pop()}}}));

System.register("chunks:///_virtual/Load.ts",["cc"],(function(a){"use strict";var t,o,s,e;return{setters:[function(a){t=a.cclegacy,o=a.resources,s=a.error,e=a._decorator}],execute:function(){var c;t._RF.push({},"009abcVCRlFq504p2JFyx9A","Load",void 0);const{ccclass:r,property:n}=e;a("Load",r("Load")(c=class{constructor(){this.weaponData=void 0,this.loadData("weapon")}start(){}update(a){}loadData(a){o.load(a,((a,t)=>{a?s(a.message||a):(this.weaponData=t.json,console.log(this.weaponData))}))}})||c);t._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./BattleFlow.ts","./Character.ts","./Control.ts","./DBMacros.ts","./Enum.ts","./Game.ts","./Load.ts","./Main.ts","./Tools.ts","./View.ts","./Weapon.ts","./Characterdata.ts","./Weapondata.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/Main.ts",["cc","./BattleFlow.ts","./Game.ts","./View.ts","./Control.ts"],(function(t){"use strict";var e,n,o,a,c,i,s;return{setters:[function(t){e=t.cclegacy,n=t.Component,o=t._decorator},function(t){a=t.BattleFlow},function(t){c=t.Item},function(t){i=t.View},function(t){s=t.Control}],execute:function(){var r;e._RF.push({},"6f42b9hXYJMarrIFwNHkcZ3","Main",void 0);const{ccclass:l,property:u}=o;t("Main",l("Main")(r=class extends n{onLoad(){c.battleFlow=new a,c.view=this.node.getComponent(i),c.control=this.node.getComponent(s)}start(){c.battleFlow.initBattle()}update(t){c.battleFlow.update(t)}})||r);e._RF.pop()}}}));

System.register("chunks:///_virtual/Tools.ts",["cc"],(function(s){"use strict";var t;return{setters:[function(s){t=s.cclegacy}],execute:function(){t._RF.push({},"bbe0bm6LmxMJ4vPm2kKGkpZ","Tools",void 0);s("Tools",class{}),t._RF.pop()}}}));

System.register("chunks:///_virtual/View.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enum.ts","./Game.ts"],(function(t){"use strict";var e,a,r,l,i,n,o,s,c,h,u,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.initializerDefineProperty},function(t){r=t.cclegacy,l=t.Prefab,i=t.Node,n=t.ProgressBar,o=t.Label,s=t._decorator,c=t.Component,h=t.instantiate},function(t){u=t.CharacterType},function(t){p=t.Item}],execute:function(){var b,g,m,d,w,y,f,C,x,F,B,k,P,E,T;r._RF.push({},"a1c24s9pFdIyaXE+MYm/t5E","View",void 0);const{ccclass:D,property:H}=s;t("View",(b=D("View"),g=H({type:l}),m=H({type:i}),d=H({type:n}),w=H({type:n}),y=H({type:o}),f=H({type:o}),b((F=e((x=class extends c{constructor(...t){super(...t),a(this,"txtBattle",F,this),a(this,"context",B,this),a(this,"barPlayer",k,this),a(this,"barEnemy",P,this),a(this,"txtPlayerHealth",E,this),a(this,"txtEnemyHealth",T,this),this.txtLevel=0,this.isLog=!0}start(){}update(t){}setBattleMsg(t){let e,a,r,l=h(this.txtBattle);this.context.addChild(l);let i=p.battleFlow.attackCharacter.charNme,n=p.battleFlow.defineCharacter.charNme,s=this.showTime(p.battleFlow.getTotalTime());e=null==p.battleFlow.attackCharacter.currentWeapon?" 赤手空拳 ":1==p.battleFlow.attackCharacter.isThrowWeapon?" 投掷武器 "+p.battleFlow.attackCharacter.currentWeapon.weaponName:" 掏出武器 "+p.battleFlow.attackCharacter.currentWeapon.weaponName,a=1==p.battleFlow.attackCharacter.isDouble?"【连续攻击】 ":" 攻击 ",r=p.battleFlow.defineCharacter.isDodge?" 【被闪避了！】":p.battleFlow.defineCharacter.isBlock?" 【被格挡了！】":p.battleFlow.attackCharacter.isDodge?" 造成了 "+t+" 点【暴击】伤害":" 造成了 "+t+" 点伤害",l.getComponent(o).string=s+i+e+a+n+r,1==this.isLog&&console.log(s+i+e+a+n+r)}setFinalMsg(){let t=h(this.txtBattle);t.getComponent(o).string="【结算】",this.context.addChild(t);let e=this.showTime(p.battleFlow.getTotalTime()),a=p.battleFlow.attackCharacter.charNme,r=p.battleFlow.defineCharacter.charNme,l=h(this.txtBattle);l.getComponent(o).string=e+" "+a+" 击败了 "+r,this.context.addChild(l);let i=p.battleFlow.attackCharacter.totalDamage,n=p.battleFlow.defineCharacter.totalDamage,s=h(this.txtBattle);s.getComponent(o).string=a+" 共造成了 "+i+" 点伤害",this.context.addChild(s);let c=h(this.txtBattle);c.getComponent(o).string=r+" 共造成了 "+n+" 点伤害",this.context.addChild(c);let u=h(this.txtBattle);u.getComponent(o).string=a+" 获得了胜利！",this.context.addChild(u)}setHeath(t,e,a){t==u.First?(this.txtPlayerHealth.string=e,this.barPlayer.progress=a):t==u.Second&&(this.txtEnemyHealth.string=e,this.barEnemy.progress=a)}reset(){let t=this.context.children;if(t.length>0)for(let e=0;e<=t.length;e++)null!=t[e]&&t[e].destroy()}showTime(t){let e,a=Math.floor(t/60),r=Math.floor(60*(t/60-a));return e=a<10?"0"+a+":":a+":",r<10?e+"0"+r+" ":e+r+" "}}).prototype,"txtBattle",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(x.prototype,"context",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(x.prototype,"barPlayer",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(x.prototype,"barEnemy",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(x.prototype,"txtPlayerHealth",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=e(x.prototype,"txtEnemyHealth",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=x))||C));r._RF.pop()}}}));

System.register("chunks:///_virtual/Weapon.ts",["cc","./Weapondata.ts"],(function(t){"use strict";var i,a,e;return{setters:[function(t){i=t.cclegacy,a=t._decorator},function(t){e=t.Weapondata}],execute:function(){var o;i._RF.push({},"0ac05HeclhMzZM/6+qL+D8F","Weapon",void 0);const{ccclass:s,property:c}=a;t("weapon",s("Weapon")(o=class{constructor(t){this.attack=void 0,this.times=void 0,this.baseThrow=void 0,this.ThrowDamage=void 0,this.doubleHit=void 0,this.criticalStrike=void 0,this.criticalDamage=void 0,this.dodge=void 0,this.block=void 0,this.weaponName=void 0,this.data=void 0,this.data=e[t],this.weaponName=e[t].Name,this.attack=e[t].Attack,this.times=e[t].Times,this.baseThrow=e[t].BaseThrow,this.ThrowDamage=e[t].ThrowDamage,this.doubleHit=e[t].DoubleHit,this.criticalStrike=e[t].CriticalStrike,this.criticalDamage=e[t].CriticalDamage,this.dodge=e[t].Dodge,this.block=e[t].Block}})||o);i._RF.pop()}}}));

System.register("chunks:///_virtual/Weapondata.ts",["cc"],(function(a){"use strict";var e;return{setters:[function(a){e=a.cclegacy}],execute:function(){e._RF.push({},"6a82dRTzZpFmL4cJaDSeIe7","Weapondata",void 0);a("Weapondata",{D001:{ID:"D001",Name:"屠龙宝刀",Attack:25,ThrowDamage:1.2,Times:3,BaseThrow:.2,DoubleHit:.3,CriticalStrike:.2,CriticalDamage:.2,Dodge:.2,Block:.2},D002:{ID:"D002",Name:"倚天屠龙剑",Attack:35,ThrowDamage:1.2,Times:3,BaseThrow:.3,DoubleHit:.3,CriticalStrike:.3,CriticalDamage:.2,Dodge:.3,Block:.3}});e._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});